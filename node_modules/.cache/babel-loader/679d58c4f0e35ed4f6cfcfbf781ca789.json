{"ast":null,"code":"var _jsxFileName = \"/home/mat/reactex/jun11/chart/src/Candlestick.js\";\nimport React, { Component } from \"react\";\nimport Chart from \"./components/Chart\";\nimport io from \"socket.io-client\";\nimport \"./App.css\";\nvar socket;\n\nclass Candlestick extends Component {\n  constructor() {\n    super();\n    this.state = {\n      stacks: [{\n        sell: \"1256\",\n        buy: \"654321\",\n        sell2: \"123456\",\n        buy2: \"654321\",\n        sell3: \"123456\",\n        buy3: \"654321\"\n      }]\n    };\n  }\n\n  componentDidMount() {\n    this.getChartData();\n    console.log(\"Component has mounted \");\n    var that = this;\n    var symbols = [\"EUR/USD\", \"XAU/USD\", \"GBP/USD\", \"JPY/USD\", \"AUD/USD\", \"NZD/USD\"]; //\"BTC/USD\",\"USD/CHF\",\"CAD/JPY\",\"USD/TRY\"];\n\n    socket = io.connect(\"http://192.168.1.145:5000\");\n    socket.emit(\"join\", symbols);\n    socket.on(\"stack\", function (datas) {\n      console.log(datas);\n      var stacks = that.state.stacks;\n\n      if (stacks === []) {\n        stacks.push(datas);\n      } else {\n        stacks.map((stack, i) => {\n          stack.buy = datas.buy;\n          stack.sell = datas.sell; // stacks.push(datas);\n        });\n      } //   that.setState({\n      //     stacks: stacks\n      //   });\n\n    });\n  }\n\n  getChartData() {\n    // Ajax calls here\n    this.setState({\n      stacks: {\n        labels: [\"EUR/USD\", \"XAU/USD\", \"GBP/USD\", \"JPY/USD\", \"AUD/USD\", \"NZD/USD\"],\n        datasets: [{\n          label: \"Population\",\n          data: [this.state.stacks.map((data, i) => (data.buy, data.sell, data.buy2, data.sell2, data.buy3, data.sell3))],\n          backgroundColor: [\"rgba(255, 99, 132, 0.6)\", \"rgba(54, 162, 235, 0.6)\", \"rgba(255, 206, 86, 0.6)\", \"rgba(75, 192, 192, 0.6)\", \"rgba(153, 102, 255, 0.6)\", \"rgba(255, 159, 64, 0.6)\", \"rgba(255, 99, 132, 0.6)\"]\n        }]\n      }\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(Chart, {\n      chartData: this.state.stacks,\n      location: \"Massachusetts\",\n      legendPosition: \"bottom\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Candlestick;","map":{"version":3,"sources":["/home/mat/reactex/jun11/chart/src/Candlestick.js"],"names":["React","Component","Chart","io","socket","Candlestick","constructor","state","stacks","sell","buy","sell2","buy2","sell3","buy3","componentDidMount","getChartData","console","log","that","symbols","connect","emit","on","datas","push","map","stack","i","setState","labels","datasets","label","data","backgroundColor","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,EAAP,MAAe,kBAAf;AAEA,OAAO,WAAP;AACA,IAAIC,MAAJ;;AACA,MAAMC,WAAN,SAA0BJ,SAA1B,CAAoC;AAClCK,EAAAA,WAAW,GAAG;AACZ;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,MAAM,EAAE,CACN;AACEC,QAAAA,IAAI,EAAE,MADR;AAEEC,QAAAA,GAAG,EAAE,QAFP;AAGEC,QAAAA,KAAK,EAAE,QAHT;AAIEC,QAAAA,IAAI,EAAE,QAJR;AAKEC,QAAAA,KAAK,EAAE,QALT;AAMEC,QAAAA,IAAI,EAAE;AANR,OADM;AADG,KAAb;AAYD;;AAEDC,EAAAA,iBAAiB,GAAG;AAClB,SAAKC,YAAL;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AAEA,QAAIC,IAAI,GAAG,IAAX;AACA,QAAIC,OAAO,GAAG,CACZ,SADY,EAEZ,SAFY,EAGZ,SAHY,EAIZ,SAJY,EAKZ,SALY,EAMZ,SANY,CAAd,CALkB,CAYf;;AAEHhB,IAAAA,MAAM,GAAGD,EAAE,CAACkB,OAAH,CAAW,2BAAX,CAAT;AACAjB,IAAAA,MAAM,CAACkB,IAAP,CAAY,MAAZ,EAAoBF,OAApB;AACAhB,IAAAA,MAAM,CAACmB,EAAP,CAAU,OAAV,EAAmB,UAASC,KAAT,EAAgB;AACjCP,MAAAA,OAAO,CAACC,GAAR,CAAYM,KAAZ;AAEA,UAAIhB,MAAM,GAAGW,IAAI,CAACZ,KAAL,CAAWC,MAAxB;;AACA,UAAIA,MAAM,KAAK,EAAf,EAAmB;AACjBA,QAAAA,MAAM,CAACiB,IAAP,CAAYD,KAAZ;AACD,OAFD,MAEO;AACLhB,QAAAA,MAAM,CAACkB,GAAP,CAAW,CAACC,KAAD,EAAQC,CAAR,KAAc;AACvBD,UAAAA,KAAK,CAACjB,GAAN,GAAYc,KAAK,CAACd,GAAlB;AACAiB,UAAAA,KAAK,CAAClB,IAAN,GAAae,KAAK,CAACf,IAAnB,CAFuB,CAIvB;AACD,SALD;AAMD,OAbgC,CAcjC;AACA;AACA;;AACD,KAjBD;AAkBD;;AAEDO,EAAAA,YAAY,GAAG;AACb;AACA,SAAKa,QAAL,CAAc;AACZrB,MAAAA,MAAM,EAAE;AACNsB,QAAAA,MAAM,EAAE,CACN,SADM,EAEN,SAFM,EAGN,SAHM,EAIN,SAJM,EAKN,SALM,EAMN,SANM,CADF;AASNC,QAAAA,QAAQ,EAAE,CACR;AACEC,UAAAA,KAAK,EAAE,YADT;AAEEC,UAAAA,IAAI,EAAE,CACJ,KAAK1B,KAAL,CAAWC,MAAX,CAAkBkB,GAAlB,CACE,CAACO,IAAD,EAAOL,CAAP,MACEK,IAAI,CAACvB,GAAL,EACAuB,IAAI,CAACxB,IADL,EAEAwB,IAAI,CAACrB,IAFL,EAGAqB,IAAI,CAACtB,KAHL,EAIAsB,IAAI,CAACnB,IAJL,EAKAmB,IAAI,CAACpB,KANP,CADF,CADI,CAFR;AAcEqB,UAAAA,eAAe,EAAE,CACf,yBADe,EAEf,yBAFe,EAGf,yBAHe,EAIf,yBAJe,EAKf,0BALe,EAMf,yBANe,EAOf,yBAPe;AAdnB,SADQ;AATJ;AADI,KAAd;AAsCD;;AAEDC,EAAAA,MAAM,GAAG;AACP,WACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,KAAD;AACE,MAAA,SAAS,EAAE,KAAK5B,KAAL,CAAWC,MADxB;AAEE,MAAA,QAAQ,EAAC,eAFX;AAGE,MAAA,cAAc,EAAC,QAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF;AASD;;AAzGiC;;AA4GpC,eAAeH,WAAf","sourcesContent":["import React, { Component } from \"react\";\nimport Chart from \"./components/Chart\";\nimport io from \"socket.io-client\";\n\nimport \"./App.css\";\nvar socket;\nclass Candlestick extends Component {\n  constructor() {\n    super();\n    this.state = {\n      stacks: [\n        {\n          sell: \"1256\",\n          buy: \"654321\",\n          sell2: \"123456\",\n          buy2: \"654321\",\n          sell3: \"123456\",\n          buy3: \"654321\"\n        }\n      ]\n    };\n  }\n\n  componentDidMount() {\n    this.getChartData();\n    console.log(\"Component has mounted \");\n\n    var that = this;\n    var symbols = [\n      \"EUR/USD\",\n      \"XAU/USD\",\n      \"GBP/USD\",\n      \"JPY/USD\",\n      \"AUD/USD\",\n      \"NZD/USD\"\n    ]; //\"BTC/USD\",\"USD/CHF\",\"CAD/JPY\",\"USD/TRY\"];\n\n    socket = io.connect(\"http://192.168.1.145:5000\");\n    socket.emit(\"join\", symbols);\n    socket.on(\"stack\", function(datas) {\n      console.log(datas);\n\n      var stacks = that.state.stacks;\n      if (stacks === []) {\n        stacks.push(datas);\n      } else {\n        stacks.map((stack, i) => {\n          stack.buy = datas.buy;\n          stack.sell = datas.sell;\n\n          // stacks.push(datas);\n        });\n      }\n      //   that.setState({\n      //     stacks: stacks\n      //   });\n    });\n  }\n\n  getChartData() {\n    // Ajax calls here\n    this.setState({\n      stacks: {\n        labels: [\n          \"EUR/USD\",\n          \"XAU/USD\",\n          \"GBP/USD\",\n          \"JPY/USD\",\n          \"AUD/USD\",\n          \"NZD/USD\"\n        ],\n        datasets: [\n          {\n            label: \"Population\",\n            data: [\n              this.state.stacks.map(\n                (data, i) => (\n                  data.buy,\n                  data.sell,\n                  data.buy2,\n                  data.sell2,\n                  data.buy3,\n                  data.sell3\n                )\n              )\n            ],\n            backgroundColor: [\n              \"rgba(255, 99, 132, 0.6)\",\n              \"rgba(54, 162, 235, 0.6)\",\n              \"rgba(255, 206, 86, 0.6)\",\n              \"rgba(75, 192, 192, 0.6)\",\n              \"rgba(153, 102, 255, 0.6)\",\n              \"rgba(255, 159, 64, 0.6)\",\n              \"rgba(255, 99, 132, 0.6)\"\n            ]\n          }\n        ]\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Chart\n          chartData={this.state.stacks}\n          location=\"Massachusetts\"\n          legendPosition=\"bottom\"\n        />\n      </div>\n    );\n  }\n}\n\nexport default Candlestick;\n"]},"metadata":{},"sourceType":"module"}